<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etsy Description Generator ‚Äî Fairweather Prints</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;700&family=Source+Sans+Pro:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Backgrounds */
            --bg-base: #1a1f2e;
            --bg-surface: rgba(26, 31, 46, 0.4);
            --bg-surface-raised: rgba(30, 36, 52, 0.5);
            --bg-card: rgba(30, 36, 52, 0.65);
            --bg-card-active: rgba(35, 42, 62, 0.7);
            --bg-fixed: rgba(20, 25, 38, 0.95);
            --bg-header: rgba(26, 31, 46, 0.3);
            /* Text */
            --text-primary: #e8e6e1;
            --text-secondary: rgba(200, 196, 188, 0.85);
            --text-tertiary: rgba(200, 196, 188, 0.7);
            --text-dimmed: rgba(160, 155, 145, 0.6);
            /* Accent (Steel Blue) */
            --accent: rgba(100, 140, 180, 0.7);
            --accent-hover: rgba(120, 160, 200, 0.7);
            --accent-bright: rgba(140, 175, 210, 0.7);
            /* Borders */
            --border-subtle: rgba(120, 130, 150, 0.15);
            --border-default: rgba(120, 130, 150, 0.25);
            --border-hover: rgba(140, 160, 185, 0.4);
            --border-accent: rgba(100, 140, 180, 0.5);
            /* Status */
            --success: rgba(100, 180, 130, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans Pro', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-base);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
        }

        /* Mist overlay */
        .mist-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            background-image: url('images/mist-overlay.png');
            background-size: cover;
            background-position: center;
            opacity: 0.4;
            filter: hue-rotate(200deg) saturate(0.3);
            animation: mistDrift 140s linear infinite;
        }

        @keyframes mistDrift {
            from { background-position: 0 0; }
            to { background-position: -500px 500px; }
        }

        .header {
            background: var(--bg-header);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            color: var(--text-primary);
            padding: 3rem 2rem;
            border-bottom: 1px solid var(--border-subtle);
            position: relative;
            z-index: 1;
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
        }

        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3.5rem;
            font-weight: 400;
            margin-bottom: 6px;
            letter-spacing: 0.02em;
        }

        .subtitle {
            color: var(--text-tertiary);
            font-size: 1.1rem;
            font-weight: 300;
        }

        .nav-link {
            display: inline-block;
            margin-top: 12px;
            color: rgba(120, 160, 200, 0.8);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.25s ease;
        }

        .nav-link:hover {
            color: rgba(140, 175, 210, 0.95);
            text-decoration: underline;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 24px;
            position: relative;
            z-index: 1;
        }

        .toolbar {
            display: flex;
            gap: 12px;
            align-items: center;
            background: var(--bg-surface);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
            margin-bottom: 24px;
        }

        .print-selector {
            flex: 1;
            padding: 10px 14px;
            border: 1px solid var(--border-default);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            background: rgba(20, 25, 38, 0.5);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .print-selector option {
            background: #1a1f2e;
            color: var(--text-primary);
        }

        .print-selector:focus {
            outline: none;
            border-color: var(--border-accent);
            box-shadow: 0 0 0 3px rgba(100, 140, 180, 0.1);
        }

        .btn {
            padding: 10px 16px;
            border: 1px solid var(--border-default);
            border-radius: 8px;
            font-size: 14px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.25s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: rgba(100, 140, 180, 0.2);
            color: rgba(140, 175, 210, 0.9);
            border-color: var(--border-accent);
        }

        .btn-primary:hover {
            background: rgba(100, 140, 180, 0.3);
            border-color: rgba(120, 160, 200, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-success {
            background: rgba(100, 180, 130, 0.2);
            color: rgba(130, 210, 160, 0.9);
            border-color: rgba(100, 180, 130, 0.4);
        }

        .btn-success:hover {
            background: rgba(100, 180, 130, 0.3);
            border-color: rgba(100, 180, 130, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary {
            background: var(--bg-surface);
            color: var(--text-secondary);
            border: 1px solid var(--border-default);
        }

        .btn-secondary:hover {
            background: var(--bg-surface-raised);
            border-color: var(--border-hover);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .panel {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
            overflow: hidden;
        }

        .panel-header {
            padding: 16px 20px;
            background: var(--bg-surface-raised);
            border-bottom: 1px solid var(--border-accent);
            font-weight: 400;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: rgba(120, 160, 200, 0.8);
        }

        .panel-body {
            padding: 1.5rem;
        }

        .print-preview {
            text-align: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .print-preview img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            margin-bottom: 12px;
            border: 1px solid var(--border-subtle);
        }

        .print-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 0.85rem;
            font-weight: 400;
            color: var(--text-dimmed);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .form-hint {
            font-size: 0.85rem;
            color: var(--text-dimmed);
            font-style: italic;
            margin-top: 4px;
        }

        input[type="text"],
        textarea,
        select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-default);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            background: rgba(20, 25, 38, 0.5);
            color: var(--text-primary);
            transition: all 0.25s ease;
        }

        input[type="text"]::placeholder,
        textarea::placeholder {
            color: var(--text-dimmed);
        }

        input[type="text"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--border-accent);
            box-shadow: 0 0 0 3px rgba(100, 140, 180, 0.1);
        }

        select option {
            background: #1a1f2e;
            color: var(--text-primary);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        textarea.large {
            min-height: 120px;
        }

        .tag-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .tag {
            padding: 6px 12px;
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.25s ease;
            user-select: none;
            color: var(--text-secondary);
        }

        .tag:hover {
            border-color: var(--border-hover);
            background: var(--bg-surface-raised);
        }

        .tag.selected {
            background: rgba(100, 140, 180, 0.25);
            color: rgba(140, 175, 210, 0.95);
            border-color: var(--border-accent);
        }

        .preview-area {
            background: rgba(20, 25, 38, 0.5);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            padding: 20px;
            min-height: 500px;
            font-size: 14px;
            line-height: 1.8;
            white-space: pre-wrap;
            font-family: 'Cormorant Garamond', Georgia, serif;
            color: var(--text-secondary);
        }

        .preview-area p {
            margin-bottom: 16px;
        }

        .preview-area strong {
            display: block;
            margin-top: 20px;
            margin-bottom: 8px;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 13px;
            letter-spacing: 0.5px;
            color: var(--text-primary);
        }

        .preview-area ul {
            margin-left: 20px;
            margin-bottom: 16px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-dimmed);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.3;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .saved-indicator {
            display: inline-block;
            padding: 8px 14px;
            background: rgba(100, 180, 130, 0.2);
            color: rgba(130, 210, 160, 0.9);
            border: 1px solid rgba(100, 180, 130, 0.3);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 400;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .saved-indicator.show {
            opacity: 1;
        }

        @media (max-width: 1200px) {
            .workspace {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="mist-overlay"></div>
    <div class="header">
        <div class="header-content">
            <h1>Etsy Description Generator</h1>
            <p class="subtitle">Craft beautiful, consistent product descriptions for your print catalog</p>
            <a href="index.html" class="nav-link">‚Üê Back to Catalog</a>
        </div>
    </div>

    <div class="container">
        <div class="toolbar">
            <select id="print-selector" class="print-selector">
                <option value="">Select a print to generate description...</option>
            </select>
            <span class="saved-indicator" id="saved-indicator">‚úì Saved to Catalog</span>
            <button class="btn btn-success" id="copy-btn" disabled>üìã Copy to Clipboard</button>
            <button class="btn btn-primary" id="save-btn" disabled>üíæ Save to Catalog</button>
        </div>

        <div class="workspace">
            <!-- LEFT PANEL: Form -->
            <div class="panel">
                <div class="panel-header">Description Editor</div>
                <div class="panel-body">
                    <div id="empty-state" class="empty-state">
                        <div class="empty-state-icon">üé®</div>
                        <p>Select a print from the dropdown above to begin crafting its description.</p>
                    </div>

                    <div id="editor-form" style="display: none;">
                        <div class="print-preview">
                            <img id="preview-image" src="" alt="">
                            <div class="print-title" id="preview-title"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Opening Hook</label>
                            <textarea id="field-hook" placeholder="What makes this piece special in one sentence? Describe what you see + mood."></textarea>
                            <div class="form-hint">Example: "Slender white birch trunks rise through soft morning light, creating an intricate pattern against a gentle sky."</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Visual Description</label>
                            <textarea id="field-visual" class="large" placeholder="2-3 sentences about colors, composition, texture, what draws the eye..."></textarea>
                            <div class="form-hint">Be specific: "Pale bark catches subtle variations of light, while darker understory creates depth."</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Theme / Mood Tags</label>
                            <div class="tag-selector" id="mood-tags">
                                <span class="tag" data-tag="peaceful">peaceful</span>
                                <span class="tag" data-tag="mysterious">mysterious</span>
                                <span class="tag" data-tag="warm">warm</span>
                                <span class="tag" data-tag="contemplative">contemplative</span>
                                <span class="tag" data-tag="vibrant">vibrant</span>
                                <span class="tag" data-tag="quiet">quiet</span>
                                <span class="tag" data-tag="nocturnal">nocturnal</span>
                                <span class="tag" data-tag="luminous">luminous</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">About the Original</label>
                            <select id="field-medium">
                                <option value="">Select medium...</option>
                                <option value="oil on canvas">Oil on canvas</option>
                                <option value="oil on panel">Oil on panel</option>
                                <option value="acrylic on canvas">Acrylic on canvas</option>
                                <option value="watercolor">Watercolor</option>
                                <option value="mixed media">Mixed media</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Artist / Attribution</label>
                            <select id="field-artist">
                                <option value="fairweather">Fairweather Productions</option>
                                <option value="jessop">Jessop Hunt</option>
                                <option value="shannon">Shannon Hunt</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Inspiration / Context</label>
                            <textarea id="field-inspiration" placeholder="What inspired this piece? What were you exploring? Part of a series?"></textarea>
                            <div class="form-hint">Example: "Inspired by early morning walks through northern birch forests where the trees seem to whisper in the breeze."</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Optional Closer</label>
                            <select id="field-closer">
                                <option value="">None</option>
                                <option value="nature">Perfect for nature lovers</option>
                                <option value="bird">Great for bird enthusiasts</option>
                                <option value="mythology">Ideal for mythology and folklore lovers</option>
                                <option value="garden">Perfect for garden and botanical art collectors</option>
                                <option value="contemplative">Brings a sense of calm to any space</option>
                                <option value="custom">Custom (type below)...</option>
                            </select>
                            <textarea id="field-closer-custom" placeholder="Custom closing line..." style="margin-top: 8px; display: none;"></textarea>
                        </div>

                        <div class="action-buttons">
                            <button class="btn btn-secondary" id="load-notes-btn">üìù Load from Notes</button>
                            <button class="btn btn-secondary" id="clear-form-btn">üóëÔ∏è Clear Form</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT PANEL: Preview -->
            <div class="panel">
                <div class="panel-header">Live Preview</div>
                <div class="panel-body">
                    <div class="preview-area" id="preview-output">
                        <div class="empty-state">
                            <div class="empty-state-icon">üëÅÔ∏è</div>
                            <p>Your generated description will appear here as you type.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const STORAGE_KEY = 'fairweather-catalog-data';
        let prints = [];
        let currentPrint = null;

        // Load prints from localStorage or fetch default
        function loadPrints() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) {
                prints = JSON.parse(stored);
                populatePrintSelector();
            } else {
                fetch('catalog-data.json')
                    .then(r => r.json())
                    .then(data => {
                        prints = data;
                        populatePrintSelector();
                    })
                    .catch(err => {
                        console.error('Failed to load catalog data:', err);
                        alert('Failed to load catalog. Please ensure catalog-data.json exists.');
                    });
            }
        }

        // Populate print selector dropdown
        function populatePrintSelector() {
            const selector = document.getElementById('print-selector');
            selector.innerHTML = '<option value="">Select a print to generate description...</option>';

            prints.forEach((print, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${print.title}${print.artist ? ' ‚Äî ' + print.artist : ''}`;
                selector.appendChild(option);
            });

            // Check for URL parameter
            const params = new URLSearchParams(window.location.search);
            const printParam = params.get('print');
            if (printParam) {
                const index = prints.findIndex(p => p.filename.includes(printParam) || p.title.toLowerCase() === printParam.toLowerCase());
                if (index !== -1) {
                    selector.value = index;
                    loadPrint(index);
                }
            }
        }

        // Load selected print
        function loadPrint(index) {
            currentPrint = prints[index];

            // Show editor, hide empty state
            document.getElementById('empty-state').style.display = 'none';
            document.getElementById('editor-form').style.display = 'block';

            // Load preview image
            const previewImage = document.getElementById('preview-image');
            previewImage.src = `Art-for-Prints-Web/${currentPrint.web_image}`;
            previewImage.alt = currentPrint.title;

            document.getElementById('preview-title').textContent = currentPrint.title;

            // Pre-fill artist if set
            if (currentPrint.artist) {
                document.getElementById('field-artist').value = currentPrint.artist.toLowerCase();
            }

            // Clear form fields
            document.getElementById('field-hook').value = '';
            document.getElementById('field-visual').value = '';
            document.getElementById('field-medium').value = '';
            document.getElementById('field-inspiration').value = '';
            document.getElementById('field-closer').value = '';
            document.getElementById('field-closer-custom').style.display = 'none';
            document.querySelectorAll('.tag.selected').forEach(tag => tag.classList.remove('selected'));

            // If description exists, try to parse it
            if (currentPrint.description) {
                // Show existing description in preview
                updatePreview();
            }

            // Enable buttons
            document.getElementById('copy-btn').disabled = false;
            document.getElementById('save-btn').disabled = false;

            updatePreview();
        }

        // Generate and update preview
        function updatePreview() {
            if (!currentPrint) return;

            const hook = document.getElementById('field-hook').value.trim();
            const visual = document.getElementById('field-visual').value.trim();
            const medium = document.getElementById('field-medium').value;
            const artist = document.getElementById('field-artist').value;
            const inspiration = document.getElementById('field-inspiration').value.trim();
            const closerType = document.getElementById('field-closer').value;
            const closerCustom = document.getElementById('field-closer-custom').value.trim();

            let description = '';

            // Opening hook
            if (hook) {
                description += hook + '\n\n';
            }

            // Visual description
            if (visual) {
                description += visual + '\n\n';
            }

            // Print details (standard block)
            description += `PRINT DETAILS:
‚Ä¢ 8" x 10" archival quality print
‚Ä¢ Matted to 11" x 14" (fits standard frames)
‚Ä¢ Protected in clear archival bag
‚Ä¢ Ready to frame and display
‚Ä¢ Printed on premium photo paper\n\n`;

            // About the original
            if (medium || inspiration) {
                description += 'ABOUT THE ORIGINAL:\n';

                let aboutText = 'Original ';
                if (medium) aboutText += medium;

                // Add artist attribution
                if (artist === 'jessop') {
                    aboutText += ' by Jessop Hunt';
                } else if (artist === 'shannon') {
                    aboutText += ' by Shannon Hunt';
                }

                if (inspiration) {
                    aboutText += ', ' + inspiration;
                }

                description += aboutText + '.\n\n';
                description += 'Each print is carefully produced to capture the depth and texture of the original painting.\n\n';
            }

            // Optional closer
            if (closerType && closerType !== 'custom') {
                const closers = {
                    nature: 'Perfect for nature lovers.',
                    bird: 'Great for bird enthusiasts.',
                    mythology: 'Ideal for mythology and folklore lovers.',
                    garden: 'Perfect for garden and botanical art collectors.',
                    contemplative: 'Brings a sense of calm to any space.'
                };
                description += closers[closerType];
            } else if (closerType === 'custom' && closerCustom) {
                description += closerCustom;
            }

            // Update preview
            const preview = document.getElementById('preview-output');
            if (description.trim()) {
                preview.textContent = description;
            } else {
                preview.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üëÅÔ∏è</div>
                        <p>Start filling in the form to see your description preview.</p>
                    </div>
                `;
            }
        }

        // Load notes into hook field
        function loadFromNotes() {
            if (currentPrint && currentPrint.notes) {
                document.getElementById('field-hook').value = currentPrint.notes;
                updatePreview();
            } else {
                alert('No notes found for this print.');
            }
        }

        // Clear form
        function clearForm() {
            if (confirm('Clear all form fields?')) {
                document.getElementById('field-hook').value = '';
                document.getElementById('field-visual').value = '';
                document.getElementById('field-medium').value = '';
                document.getElementById('field-inspiration').value = '';
                document.getElementById('field-closer').value = '';
                document.getElementById('field-closer-custom').value = '';
                document.querySelectorAll('.tag.selected').forEach(tag => tag.classList.remove('selected'));
                updatePreview();
            }
        }

        // Save to catalog
        function saveToCatalog() {
            if (!currentPrint) return;

            const description = document.getElementById('preview-output').textContent.trim();
            if (!description) {
                alert('No description to save. Fill in the form first.');
                return;
            }

            // Find print in array and update
            const index = prints.findIndex(p => p.filename === currentPrint.filename);
            if (index !== -1) {
                prints[index].description = description;
                localStorage.setItem(STORAGE_KEY, JSON.stringify(prints));

                // Show saved indicator
                const indicator = document.getElementById('saved-indicator');
                indicator.classList.add('show');
                setTimeout(() => indicator.classList.remove('show'), 3000);
            }
        }

        // Copy to clipboard
        function copyToClipboard() {
            const description = document.getElementById('preview-output').textContent.trim();
            if (!description) {
                alert('No description to copy. Fill in the form first.');
                return;
            }

            navigator.clipboard.writeText(description).then(() => {
                const btn = document.getElementById('copy-btn');
                const originalText = btn.textContent;
                btn.textContent = '‚úì Copied!';
                setTimeout(() => btn.textContent = originalText, 2000);
            }).catch(err => {
                alert('Failed to copy to clipboard: ' + err);
            });
        }

        // Event listeners
        document.getElementById('print-selector').addEventListener('change', (e) => {
            if (e.target.value) {
                loadPrint(e.target.value);
            }
        });

        document.getElementById('field-hook').addEventListener('input', updatePreview);
        document.getElementById('field-visual').addEventListener('input', updatePreview);
        document.getElementById('field-medium').addEventListener('change', updatePreview);
        document.getElementById('field-artist').addEventListener('change', updatePreview);
        document.getElementById('field-inspiration').addEventListener('input', updatePreview);
        document.getElementById('field-closer').addEventListener('change', (e) => {
            const customField = document.getElementById('field-closer-custom');
            if (e.target.value === 'custom') {
                customField.style.display = 'block';
            } else {
                customField.style.display = 'none';
            }
            updatePreview();
        });
        document.getElementById('field-closer-custom').addEventListener('input', updatePreview);

        document.getElementById('load-notes-btn').addEventListener('click', loadFromNotes);
        document.getElementById('clear-form-btn').addEventListener('click', clearForm);
        document.getElementById('save-btn').addEventListener('click', saveToCatalog);
        document.getElementById('copy-btn').addEventListener('click', copyToClipboard);

        // Tag selection
        document.querySelectorAll('.tag').forEach(tag => {
            tag.addEventListener('click', () => {
                tag.classList.toggle('selected');
            });
        });

        // Initialize
        loadPrints();
    </script>
</body>
</html>
